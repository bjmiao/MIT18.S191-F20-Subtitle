1
00:00:00,480 --> 00:00:02,040
hello wonderful people of the internet

2
00:00:02,240 --> 00:00:03,960
and also mit class 18

3
00:00:04,160 --> 00:00:06,599
s 191 on computational thinking today

4
00:00:06,799 --> 00:00:08,439
we're actually going to be live coding

5
00:00:08,638 --> 00:00:10,280
the seam carving example that was

6
00:00:10,480 --> 00:00:11,640
introduced by grant

7
00:00:11,839 --> 00:00:13,319
a few days ago now if you haven't seen

8
00:00:13,519 --> 00:00:15,000
that lecture please feel free to go into

9
00:00:15,199 --> 00:00:16,600
the description it'll be there and it

10
00:00:16,800 --> 00:00:18,120
gives you a good intuitive description

11
00:00:18,320 --> 00:00:19,560
for what we're doing today

12
00:00:19,760 --> 00:00:21,159
um also while down there feel free to

13
00:00:21,359 --> 00:00:22,600
check out the discord link

14
00:00:22,800 --> 00:00:24,120
where you can leave any comments

15
00:00:24,320 --> 00:00:26,120
questions concerns ideas anything like

16
00:00:26,320 --> 00:00:26,679
that

17
00:00:26,879 --> 00:00:28,120
and hopefully we'll be able to pick it

18
00:00:28,320 --> 00:00:30,280
up during the live stream now

19
00:00:30,480 --> 00:00:32,679
unlike last time we won't be directly

20
00:00:32,880 --> 00:00:33,799
monitoring chat

21
00:00:34,000 --> 00:00:35,719
on stream instead we have the four or

22
00:00:35,920 --> 00:00:37,719
rather three other lecturers available

23
00:00:37,920 --> 00:00:38,839
and you should be able to see them on

24
00:00:39,039 --> 00:00:41,320
the side over here grant allen and dave

25
00:00:41,520 --> 00:00:42,919
and they're able to say whatever they

26
00:00:43,119 --> 00:00:44,518
want whenever they want and they should

27
00:00:44,719 --> 00:00:45,878
be able to interrupt me so

28
00:00:46,079 --> 00:00:47,640
it might be a bit chaotic but hopefully

29
00:00:47,840 --> 00:00:49,399
it'll turn out okay

30
00:00:49,600 --> 00:00:51,159
i think that's all we have to say for

31
00:00:51,359 --> 00:00:53,640
now um so let's go ahead and get started

32
00:00:53,840 --> 00:00:55,320
with a very brief discussion

33
00:00:55,520 --> 00:00:57,320
of seam carving what it is just in case

34
00:00:57,520 --> 00:00:58,518
you missed the last lecture

35
00:00:58,719 --> 00:00:59,640
and you don't want to look at it right

36
00:00:59,840 --> 00:01:01,959
now so

37
00:01:02,159 --> 00:01:03,158
we're going to start with the same image

38
00:01:03,359 --> 00:01:05,159
that we had last week

39
00:01:05,359 --> 00:01:06,359
i don't actually know what it's called

40
00:01:06,560 --> 00:01:08,119
the persistence of memory by dali i

41
00:01:08,319 --> 00:01:08,759
think

42
00:01:08,959 --> 00:01:11,159
but let's pretend that we want to squash

43
00:01:11,359 --> 00:01:12,679
this image horizontally we just want to

44
00:01:12,879 --> 00:01:13,560
make it smaller

45
00:01:13,760 --> 00:01:15,640
in the horizontal dimension now there's

46
00:01:15,840 --> 00:01:16,759
a couple of different ways that we could

47
00:01:16,959 --> 00:01:18,278
do that we could crop the image

48
00:01:18,478 --> 00:01:20,119
like this but cropping has a clear

49
00:01:20,319 --> 00:01:21,399
problem and that you're probably going

50
00:01:21,599 --> 00:01:23,558
to remove important parts of the image

51
00:01:23,759 --> 00:01:25,079
another thing you could do is scale the

52
00:01:25,280 --> 00:01:27,000
image but now all the important parts of

53
00:01:27,200 --> 00:01:29,319
the image become scaled as well

54
00:01:29,519 --> 00:01:32,679
so what could we do well as humans we

55
00:01:32,879 --> 00:01:34,278
can kind of look at this image and we

56
00:01:34,478 --> 00:01:35,399
can kind of see

57
00:01:35,599 --> 00:01:37,799
what we interpret to be important parts

58
00:01:38,000 --> 00:01:39,799
of the image for me i think this

59
00:01:40,000 --> 00:01:41,238
thing is probably important i don't know

60
00:01:41,438 --> 00:01:42,840
what it is but it's probably important

61
00:01:43,040 --> 00:01:44,840
the clock over here probably important

62
00:01:45,040 --> 00:01:46,359
and so if i were to

63
00:01:46,560 --> 00:01:48,918
try to rescale this but keep all of the

64
00:01:49,118 --> 00:01:49,878
important parts

65
00:01:50,078 --> 00:01:53,079
to remain uh with the same aspect ratio

66
00:01:53,280 --> 00:01:54,599
they had before

67
00:01:54,799 --> 00:01:56,918
what i might naively do is draw a line

68
00:01:57,118 --> 00:01:58,439
that misses all of these

69
00:01:58,640 --> 00:02:00,359
important bits of the image and just

70
00:02:00,560 --> 00:02:02,518
remove that set of pixels the idea is

71
00:02:02,718 --> 00:02:04,039
that we want to create a set of

72
00:02:04,239 --> 00:02:06,119
pixels or find a set of pixels that are

73
00:02:06,319 --> 00:02:07,079
so

74
00:02:07,280 --> 00:02:08,520
not important to the image that when

75
00:02:08,719 --> 00:02:10,439
they're removed the user doesn't even

76
00:02:10,639 --> 00:02:11,880
notice they're gone

77
00:02:12,080 --> 00:02:14,039
so for example uh we could create a line

78
00:02:14,239 --> 00:02:15,320
that looks something like this

79
00:02:15,520 --> 00:02:17,080
and again it's just a set of pixels that

80
00:02:17,280 --> 00:02:19,240
can be removed uh without anyone

81
00:02:19,439 --> 00:02:21,880
realizing they're gone now if we were to

82
00:02:22,080 --> 00:02:23,399
go at the top

83
00:02:23,598 --> 00:02:24,759
go through all of the elements at the

84
00:02:24,959 --> 00:02:26,759
top of our image and look for all

85
00:02:26,959 --> 00:02:29,080
possible lines and all possible paths

86
00:02:29,280 --> 00:02:31,640
where we try to avoid all important bits

87
00:02:31,840 --> 00:02:32,200
of the

88
00:02:32,400 --> 00:02:33,880
of the image we might get an image that

89
00:02:34,080 --> 00:02:35,960
looks like this now i'm showing this

90
00:02:36,159 --> 00:02:37,240
right now because it's it's kind of

91
00:02:37,439 --> 00:02:37,880
important

92
00:02:38,080 --> 00:02:39,640
to understand intuitively what we're

93
00:02:39,840 --> 00:02:41,319
trying to miss here so if you look at

94
00:02:41,519 --> 00:02:42,439
these lines they all kind of come

95
00:02:42,639 --> 00:02:43,080
together

96
00:02:43,280 --> 00:02:44,360
and they're obviously missing kind of

97
00:02:44,560 --> 00:02:46,759
the edge here and then it's also missing

98
00:02:46,959 --> 00:02:48,679
the edges over here and the edges over

99
00:02:48,878 --> 00:02:50,200
here basically what we're doing

100
00:02:50,400 --> 00:02:52,118
is we're drawing lines that are avoiding

101
00:02:52,318 --> 00:02:53,560
any sharp

102
00:02:53,759 --> 00:02:56,200
change between one pixel and the next so

103
00:02:56,400 --> 00:02:57,719
again if we were to choose a line and

104
00:02:57,919 --> 00:02:58,520
remove one

105
00:02:58,719 --> 00:02:59,880
and then choose a new line and remove

106
00:03:00,080 --> 00:03:01,560
one and a new line and remove one we'll

107
00:03:01,759 --> 00:03:02,840
actually start to get an animation that

108
00:03:03,039 --> 00:03:04,200
looks something like this

109
00:03:04,400 --> 00:03:05,640
where the image kind of comes together

110
00:03:05,840 --> 00:03:07,319
and you can see that the aspect ratio of

111
00:03:07,519 --> 00:03:08,920
all of the important parts remains the

112
00:03:09,120 --> 00:03:09,800
same

113
00:03:10,000 --> 00:03:11,560
now at some point you start to notice

114
00:03:11,759 --> 00:03:14,600
that there's weird artifacts that appear

115
00:03:14,800 --> 00:03:16,360
and as you keep going further and

116
00:03:16,560 --> 00:03:18,039
further in you'll notice that you know

117
00:03:18,239 --> 00:03:19,719
for example the tree branch up there in

118
00:03:19,919 --> 00:03:20,759
the upper

119
00:03:20,959 --> 00:03:22,840
right hand corner or sorry left hand

120
00:03:23,039 --> 00:03:24,439
corner here probably shouldn't be doing

121
00:03:24,639 --> 00:03:25,719
that you know and the clock doesn't look

122
00:03:25,919 --> 00:03:26,920
right and all this other stuff

123
00:03:27,120 --> 00:03:29,240
but still the fact that you can rescale

124
00:03:29,439 --> 00:03:31,240
and in fact this is called content aware

125
00:03:31,439 --> 00:03:33,640
rescaling in photoshop in this way while

126
00:03:33,840 --> 00:03:35,080
keeping the content on the inside

127
00:03:35,280 --> 00:03:36,360
relatively the same

128
00:03:36,560 --> 00:03:39,160
is pretty cool so now we have i guess

129
00:03:39,360 --> 00:03:40,520
the next obvious question

130
00:03:40,719 --> 00:03:43,080
how does a computer not us tell what is

131
00:03:43,280 --> 00:03:44,200
important in the image

132
00:03:44,400 --> 00:03:45,959
grant talked about this on tuesday the

133
00:03:46,158 --> 00:03:47,399
easiest way is

134
00:03:47,598 --> 00:03:49,480
by finding those edges that i was

135
00:03:49,680 --> 00:03:50,679
talking about before

136
00:03:50,878 --> 00:03:52,759
and one way to do this is with a sobel

137
00:03:52,959 --> 00:03:53,800
filter um

138
00:03:54,000 --> 00:03:55,800
in order to find kind of the change

139
00:03:56,000 --> 00:03:57,719
between two pixels we can put the sobel

140
00:03:57,919 --> 00:03:58,679
filter in there

141
00:03:58,878 --> 00:04:00,439
and this will give us a very brief

142
00:04:00,639 --> 00:04:02,039
highlight over all the edges so

143
00:04:02,239 --> 00:04:04,280
naively what i would probably do is draw

144
00:04:04,479 --> 00:04:06,360
a line that minimizes the intersection

145
00:04:06,560 --> 00:04:08,439
with the white lines in here

146
00:04:08,639 --> 00:04:10,759
and that's kind of the idea behind this

147
00:04:10,959 --> 00:04:12,200
particular method we're just going to

148
00:04:12,400 --> 00:04:13,399
try to find a line

149
00:04:13,598 --> 00:04:15,239
that minimizes the times it passes

150
00:04:15,438 --> 00:04:17,079
through important parts of the image

151
00:04:17,279 --> 00:04:18,439
and it can tell it passes through an

152
00:04:18,639 --> 00:04:20,038
important part because it passes through

153
00:04:20,238 --> 00:04:22,759
the edge of that important part

154
00:04:22,959 --> 00:04:25,240
so hopefully that's clear and we're

155
00:04:25,439 --> 00:04:26,120
going to go ahead and move on to the

156
00:04:26,319 --> 00:04:27,559
next bit i'm going to move this into the

157
00:04:27,759 --> 00:04:27,800
upper

158
00:04:28,000 --> 00:04:29,480
left-hand corner so we have an image on

159
00:04:29,680 --> 00:04:31,160
screen and i'm going to explain what you

160
00:04:31,360 --> 00:04:32,520
see right here let me go ahead clear

161
00:04:32,720 --> 00:04:33,559
this

162
00:04:33,759 --> 00:04:35,800
and let me also open up the file that

163
00:04:36,000 --> 00:04:37,559
we're working on today

164
00:04:37,759 --> 00:04:38,920
so if you look in the upper left hand

165
00:04:39,120 --> 00:04:41,240
corner you'll see an image and this is

166
00:04:41,439 --> 00:04:41,879
going to be

167
00:04:42,079 --> 00:04:43,079
basically the image that we're going to

168
00:04:43,279 --> 00:04:45,319
try to generate uh the

169
00:04:45,519 --> 00:04:46,840
middle terminal here is going to be the

170
00:04:47,040 --> 00:04:48,360
terminal that i'm coding in and the

171
00:04:48,560 --> 00:04:50,360
terminal over here is the typical julia

172
00:04:50,560 --> 00:04:51,639
repl

173
00:04:51,839 --> 00:04:53,718
now because we only have like 25 minutes

174
00:04:53,918 --> 00:04:55,319
and now 20 minutes because you know i

175
00:04:55,519 --> 00:04:57,319
was talking about seam carving for a bit

176
00:04:57,519 --> 00:04:59,160
um i have a bunch of functions that are

177
00:04:59,360 --> 00:05:00,520
already pre-generated

178
00:05:00,720 --> 00:05:02,040
so for example the brightness function

179
00:05:02,240 --> 00:05:03,319
that was introduced by grant a few

180
00:05:03,519 --> 00:05:04,600
lectures ago is here

181
00:05:04,800 --> 00:05:06,520
we have a two additional functions draw

182
00:05:06,720 --> 00:05:07,718
seam and right image

183
00:05:07,918 --> 00:05:09,079
these are just different ways for me to

184
00:05:09,279 --> 00:05:10,680
imprint a seam on an image and output it

185
00:05:10,879 --> 00:05:11,240
easily

186
00:05:11,439 --> 00:05:13,079
and also write a seam out to file

187
00:05:13,279 --> 00:05:14,838
relatively quickly

188
00:05:15,038 --> 00:05:16,680
now when we're thinking about what to do

189
00:05:16,879 --> 00:05:18,360
with seam carving for me

190
00:05:18,560 --> 00:05:20,199
i tend to think of three important

191
00:05:20,399 --> 00:05:22,120
questions the first question is

192
00:05:22,319 --> 00:05:24,199
what is important in the image how do we

193
00:05:24,399 --> 00:05:25,639
find what is important

194
00:05:25,839 --> 00:05:27,718
the next question is how do we find that

195
00:05:27,918 --> 00:05:30,120
seam of elements that's unimportant

196
00:05:30,319 --> 00:05:31,639
and the third question is how do we

197
00:05:31,839 --> 00:05:33,800
remove that seam from the image

198
00:05:34,000 --> 00:05:36,360
so unfortunately due to time constraints

199
00:05:36,560 --> 00:05:37,559
i went ahead and solved

200
00:05:37,759 --> 00:05:39,559
that third that third problem here and

201
00:05:39,759 --> 00:05:40,838
i'll discuss it when we get there

202
00:05:41,038 --> 00:05:42,278
and i've also added a seam carving

203
00:05:42,478 --> 00:05:43,879
function that basically takes in an

204
00:05:44,079 --> 00:05:44,600
image

205
00:05:44,800 --> 00:05:46,520
and then also an output resolution and

206
00:05:46,720 --> 00:05:47,960
we'll squash it down

207
00:05:48,160 --> 00:05:50,120
now if you are familiar with a notebook

208
00:05:50,319 --> 00:05:51,718
all of the logic from the notebook stays

209
00:05:51,918 --> 00:05:52,199
the same

210
00:05:52,399 --> 00:05:53,559
although the terminology may have

211
00:05:53,759 --> 00:05:55,400
changed slightly just because

212
00:05:55,600 --> 00:05:57,319
i'm trying to speak it or explain it to

213
00:05:57,519 --> 00:05:58,439
you as i'm coding

214
00:05:58,639 --> 00:06:00,439
and in that way i change the terminology

215
00:06:00,639 --> 00:06:02,759
to stuff that i would more naturally say

216
00:06:02,959 --> 00:06:05,240
okay so i think we can go ahead and get

217
00:06:05,439 --> 00:06:05,960
started

218
00:06:06,160 --> 00:06:07,559
with the first function which will be to

219
00:06:07,759 --> 00:06:09,160
find the energy

220
00:06:09,360 --> 00:06:10,838
now i do have a reference implementation

221
00:06:11,038 --> 00:06:12,439
over on the side just in case i get

222
00:06:12,639 --> 00:06:12,920
stuck

223
00:06:13,120 --> 00:06:16,999
but hopefully we should be okay so

224
00:06:17,199 --> 00:06:19,160
in finding the energy what first is the

225
00:06:19,360 --> 00:06:20,920
energy well the energy is a term which

226
00:06:21,120 --> 00:06:22,600
corresponds to essentially

227
00:06:22,800 --> 00:06:26,278
this edge this edge image that we see up

228
00:06:26,478 --> 00:06:26,999
here

229
00:06:27,199 --> 00:06:28,759
so i'm simply going to say the energy in

230
00:06:28,959 --> 00:06:30,920
the x direction

231
00:06:31,120 --> 00:06:33,400
energy in the x direction is going to be

232
00:06:33,600 --> 00:06:35,480
equal to

233
00:06:35,680 --> 00:06:38,680
what is essentially the brightness

234
00:06:38,879 --> 00:06:42,040
uh one second the im filter

235
00:06:42,240 --> 00:06:43,400
of the brightness and i'll explain this

236
00:06:43,600 --> 00:06:46,800
in just a second brightness

237
00:06:47,120 --> 00:06:49,399
of the image uh and then we're gonna

238
00:06:49,598 --> 00:06:50,759
have to

239
00:06:50,959 --> 00:06:54,278
um do this with a kernel one second

240
00:06:54,478 --> 00:06:56,439
dot so bill here and we're gonna grab

241
00:06:56,639 --> 00:06:57,559
the x dimension of that

242
00:06:57,759 --> 00:06:58,759
kernel sobel now there's a bunch of

243
00:06:58,959 --> 00:07:00,439
different ways that you could do this in

244
00:07:00,639 --> 00:07:01,480
particular uh

245
00:07:01,680 --> 00:07:02,759
the important bit here is this i am

246
00:07:02,959 --> 00:07:04,999
filter this im filter is basically

247
00:07:05,199 --> 00:07:06,600
replacing the convolve function that

248
00:07:06,800 --> 00:07:07,879
grant showed before

249
00:07:08,079 --> 00:07:09,718
so just keep in mind it's essentially an

250
00:07:09,918 --> 00:07:11,559
image filter it's applying a filter to

251
00:07:11,759 --> 00:07:11,800
an

252
00:07:12,000 --> 00:07:14,199
image now i think that'll work so if i

253
00:07:14,399 --> 00:07:15,160
yank and paste this

254
00:07:15,360 --> 00:07:17,800
and i do energy y i change this to the

255
00:07:18,000 --> 00:07:18,999
first dimension

256
00:07:19,199 --> 00:07:22,119
and then i just say that the we return

257
00:07:22,319 --> 00:07:25,399
the square root dot of

258
00:07:25,598 --> 00:07:28,999
energy underscore x

259
00:07:29,199 --> 00:07:33,718
squared plus energy uh comma y

260
00:07:33,918 --> 00:07:37,240
uh one second squared i think this

261
00:07:37,439 --> 00:07:37,800
should

262
00:07:38,000 --> 00:07:39,399
work so we're gonna go over here and

263
00:07:39,598 --> 00:07:41,079
we're gonna load an image i'm just gonna

264
00:07:41,279 --> 00:07:42,639
call the image image

265
00:07:42,839 --> 00:07:45,800
and um i'm just gonna load zero.jpg it's

266
00:07:46,000 --> 00:07:46,999
just what i called the image

267
00:07:47,199 --> 00:07:49,160
don't ask me why this is just what i did

268
00:07:49,360 --> 00:07:50,838
if i do i am show of the image

269
00:07:51,038 --> 00:07:54,360
we see it up here right so now i'm going

270
00:07:54,560 --> 00:07:56,600
to include the file we just created

271
00:07:56,800 --> 00:07:59,240
and we're just going to run um energy

272
00:07:59,439 --> 00:08:00,999
it's going to be equal to find energy of

273
00:08:01,199 --> 00:08:02,520
image

274
00:08:02,720 --> 00:08:06,560
misbuild sobel let's fix that real quick

275
00:08:10,079 --> 00:08:11,639
and let's try it one more time conclude

276
00:08:11,839 --> 00:08:12,920
and now let's do energy find

277
00:08:13,120 --> 00:08:14,999
energy and now if we do i am show of the

278
00:08:15,199 --> 00:08:16,040
energy

279
00:08:16,240 --> 00:08:18,360
we see essentially the same image we saw

280
00:08:18,560 --> 00:08:20,439
over there to the left

281
00:08:20,639 --> 00:08:22,759
okay so now we're going to get into the

282
00:08:22,959 --> 00:08:25,399
more complicated bits of the lecture

283
00:08:25,598 --> 00:08:27,559
so we've already found the energy now we

284
00:08:27,759 --> 00:08:28,600
have to find something that i'm going to

285
00:08:28,800 --> 00:08:29,879
call the energy

286
00:08:30,079 --> 00:08:32,758
map now what the energy map is is this

287
00:08:32,958 --> 00:08:34,599
image over here that was

288
00:08:34,799 --> 00:08:36,519
green in grant's lecture yesterday but i

289
00:08:36,719 --> 00:08:37,799
just kept everything in grayscale

290
00:08:38,000 --> 00:08:38,120
because

291
00:08:38,320 --> 00:08:40,599
i don't know i like grayscale um this is

292
00:08:40,799 --> 00:08:41,639
essentially

293
00:08:41,839 --> 00:08:43,879
a map of what direction you need to go

294
00:08:44,080 --> 00:08:45,000
in if

295
00:08:45,200 --> 00:08:47,159
you are some random pixel so the idea is

296
00:08:47,360 --> 00:08:48,439
if you're trying to draw your seam and

297
00:08:48,639 --> 00:08:49,240
you have

298
00:08:49,440 --> 00:08:51,639
some random pixel let's say i don't know

299
00:08:51,839 --> 00:08:53,078
maybe up here

300
00:08:53,278 --> 00:08:55,318
right well you're trying to avoid a lot

301
00:08:55,519 --> 00:08:56,519
of stuff underneath you right

302
00:08:56,720 --> 00:08:58,359
so if you're if you find yourself on

303
00:08:58,559 --> 00:09:00,198
this location in your scene

304
00:09:00,399 --> 00:09:02,279
the way you read this map is that you're

305
00:09:02,480 --> 00:09:03,959
gonna go hard right

306
00:09:04,159 --> 00:09:05,639
to avoid any object that's coming in

307
00:09:05,839 --> 00:09:06,919
immediately right so you're gonna go

308
00:09:07,120 --> 00:09:07,799
hard right hard right

309
00:09:08,000 --> 00:09:09,159
hard right until you hit this black

310
00:09:09,360 --> 00:09:11,479
region and then you go down right

311
00:09:11,679 --> 00:09:14,359
the idea here is that this set of pixels

312
00:09:14,559 --> 00:09:16,839
is the minimum possible energy

313
00:09:17,039 --> 00:09:19,559
uh following any path from basically the

314
00:09:19,759 --> 00:09:20,679
bottom up

315
00:09:20,879 --> 00:09:23,318
in order to get to that point so this

316
00:09:23,519 --> 00:09:24,279
means that if you're

317
00:09:24,480 --> 00:09:25,559
i don't know just drawing random path

318
00:09:25,759 --> 00:09:27,399
going up you'll see that

319
00:09:27,600 --> 00:09:29,159
um you'll see that you're passing

320
00:09:29,360 --> 00:09:30,839
through a lot of very

321
00:09:31,039 --> 00:09:33,799
uh very important objects and because of

322
00:09:34,000 --> 00:09:35,799
that we're collecting a lot of energy as

323
00:09:36,000 --> 00:09:37,078
we're going up where we're passing

324
00:09:37,278 --> 00:09:38,758
through a lot of important stuff

325
00:09:38,958 --> 00:09:40,439
and so again the whiteness is kind of

326
00:09:40,639 --> 00:09:41,879
how much important stuff you've gone

327
00:09:42,080 --> 00:09:42,919
through

328
00:09:43,120 --> 00:09:44,839
but i think the thing that everyone i

329
00:09:45,039 --> 00:09:46,599
everyone's eyes are drawn to isn't so

330
00:09:46,799 --> 00:09:47,959
much you know the color gradient or

331
00:09:48,159 --> 00:09:49,078
anything like that

332
00:09:49,278 --> 00:09:51,240
it's actually these little cones of

333
00:09:51,440 --> 00:09:52,599
dunshire or whatever you want to call

334
00:09:52,799 --> 00:09:53,000
them

335
00:09:53,200 --> 00:09:55,318
that appear in the energy map so i want

336
00:09:55,519 --> 00:09:56,599
to take a second to talk about where

337
00:09:56,799 --> 00:09:57,559
those come from

338
00:09:57,759 --> 00:10:00,599
before continuing the lecture so here on

339
00:10:00,799 --> 00:10:02,439
the left we see the energy again this is

340
00:10:02,639 --> 00:10:04,039
your edge detection whatever is

341
00:10:04,240 --> 00:10:04,599
important

342
00:10:04,799 --> 00:10:06,198
i just created a set of pixels that are

343
00:10:06,399 --> 00:10:08,359
along the lower uh the lower bit of the

344
00:10:08,559 --> 00:10:08,839
image

345
00:10:09,039 --> 00:10:10,679
and i said there's a blank pixel here

346
00:10:10,879 --> 00:10:12,279
and here now it doesn't matter what the

347
00:10:12,480 --> 00:10:13,078
value is

348
00:10:13,278 --> 00:10:14,758
we can say they're one or zero it

349
00:10:14,958 --> 00:10:16,758
doesn't really matter uh the point is

350
00:10:16,958 --> 00:10:19,159
that as we're generating the energy the

351
00:10:19,360 --> 00:10:20,599
way we'd read this is for example if

352
00:10:20,799 --> 00:10:23,799
we're at this pixel here

353
00:10:24,000 --> 00:10:26,198
we're trying to find basically what path

354
00:10:26,399 --> 00:10:27,399
will lead us here with the minimal

355
00:10:27,600 --> 00:10:28,519
possible energy right

356
00:10:28,720 --> 00:10:29,799
so basically we could come from this

357
00:10:30,000 --> 00:10:31,878
pixel this pixel or this pixel so we're

358
00:10:32,078 --> 00:10:33,159
going to ask ourselves which one has the

359
00:10:33,360 --> 00:10:34,039
minimum energy

360
00:10:34,240 --> 00:10:35,959
it's obviously this one over here so

361
00:10:36,159 --> 00:10:37,240
what we're going to say is

362
00:10:37,440 --> 00:10:39,159
as we move further up how could we

363
00:10:39,360 --> 00:10:40,679
possibly or what rather what is the

364
00:10:40,879 --> 00:10:42,359
minimum energy we could have when we get

365
00:10:42,559 --> 00:10:43,078
to this point

366
00:10:43,278 --> 00:10:44,919
so if we do this guy here well it has to

367
00:10:45,120 --> 00:10:46,839
come from any of these red spaces

368
00:10:47,039 --> 00:10:48,758
so over here it's also going to be red

369
00:10:48,958 --> 00:10:50,279
and again this was introduced by grant

370
00:10:50,480 --> 00:10:51,078
also

371
00:10:51,278 --> 00:10:52,758
but this is why the cone shape appears

372
00:10:52,958 --> 00:10:54,839
because essentially um the paths can

373
00:10:55,039 --> 00:10:55,399
only

374
00:10:55,600 --> 00:10:57,399
move diagonally upwards or directly

375
00:10:57,600 --> 00:10:59,639
upwards and because of that

376
00:10:59,839 --> 00:11:01,399
it ends up creating these diagonal paths

377
00:11:01,600 --> 00:11:02,919
in the energy map

378
00:11:03,120 --> 00:11:04,359
now what we're trying to do when we

379
00:11:04,559 --> 00:11:06,679
create the energy map is give a specific

380
00:11:06,879 --> 00:11:07,479
pixel that

381
00:11:07,679 --> 00:11:10,039
this guy for example wants to move to so

382
00:11:10,240 --> 00:11:11,479
in this case we know we want to move

383
00:11:11,679 --> 00:11:12,758
down to the lower left

384
00:11:12,958 --> 00:11:13,878
so we're going to say that we want to

385
00:11:14,078 --> 00:11:15,959
move down to the lower left instead of

386
00:11:16,159 --> 00:11:17,399
central or to the right

387
00:11:17,600 --> 00:11:19,078
and so the way i'm notating that is that

388
00:11:19,278 --> 00:11:21,159
negative one is going to be lower left

389
00:11:21,360 --> 00:11:22,439
zero is going to be going towards the

390
00:11:22,639 --> 00:11:24,198
center and one is going to be going

391
00:11:24,399 --> 00:11:25,559
towards the lower right

392
00:11:25,759 --> 00:11:27,318
pixel and so that's how i'm going to be

393
00:11:27,519 --> 00:11:29,799
notating this in the future

394
00:11:30,000 --> 00:11:32,039
okay and like i kind of alluded to here

395
00:11:32,240 --> 00:11:33,878
in order to generate the energy map

396
00:11:34,078 --> 00:11:35,639
literally all we do is set this bottom

397
00:11:35,839 --> 00:11:37,159
layer equal to

398
00:11:37,360 --> 00:11:39,078
the energy and then we just go through

399
00:11:39,278 --> 00:11:40,198
every single pixel

400
00:11:40,399 --> 00:11:41,799
here and we look at all the paths they

401
00:11:42,000 --> 00:11:43,799
could go to and then we sum the energy

402
00:11:44,000 --> 00:11:45,719
up with the minimal path coming up to it

403
00:11:45,919 --> 00:11:47,078
and this will allow us to create this

404
00:11:47,278 --> 00:11:49,078
path in here and also a set of

405
00:11:49,278 --> 00:11:49,799
directions

406
00:11:50,000 --> 00:11:51,240
which looks like this kind of gradient

407
00:11:51,440 --> 00:11:53,078
image in here the way you read this is

408
00:11:53,278 --> 00:11:54,438
that white will be going to the right

409
00:11:54,639 --> 00:11:56,438
black will be going to the left and zero

410
00:11:56,639 --> 00:11:57,799
will be going down so you can see the

411
00:11:58,000 --> 00:11:58,359
flow

412
00:11:58,559 --> 00:12:01,799
of the the seams as they move forward

413
00:12:02,000 --> 00:12:03,639
okay so let's get this done because we

414
00:12:03,839 --> 00:12:05,959
are you know we've got 15 minutes but

415
00:12:06,159 --> 00:12:08,519
it's 15 minutes so the first thing i'm

416
00:12:08,720 --> 00:12:09,159
going to do

417
00:12:09,360 --> 00:12:14,279
is i'm going to go ahead and one second

418
00:12:14,480 --> 00:12:15,878
i'm going to go ahead and define the

419
00:12:16,078 --> 00:12:17,000
energy map which is the thing we're

420
00:12:17,200 --> 00:12:17,799
going to output

421
00:12:18,000 --> 00:12:21,399
as zeros of size of the energy

422
00:12:21,600 --> 00:12:23,479
let me remove that t in there and then

423
00:12:23,679 --> 00:12:26,198
i'm going to say that the energy map

424
00:12:26,399 --> 00:12:30,039
of the very last row and

425
00:12:30,240 --> 00:12:32,839
there is going to be equal to the energy

426
00:12:33,039 --> 00:12:33,318
of

427
00:12:33,519 --> 00:12:36,438
that value as well then under this i'm

428
00:12:36,639 --> 00:12:38,198
just going to say that our set of next

429
00:12:38,399 --> 00:12:39,000
elements

430
00:12:39,200 --> 00:12:40,279
in the notebook this is called

431
00:12:40,480 --> 00:12:41,959
directions but i actually got kind of

432
00:12:42,159 --> 00:12:42,919
confused as to what

433
00:12:43,120 --> 00:12:44,679
that meant so i'm calling it next

434
00:12:44,879 --> 00:12:46,120
elements here which is also probably

435
00:12:46,320 --> 00:12:47,719
equally as confusing

436
00:12:47,919 --> 00:12:49,878
um but here's what we're going to say

437
00:12:50,078 --> 00:12:51,159
we're going to say the next element

438
00:12:51,360 --> 00:12:52,679
is gonna be equal to zeros and

439
00:12:52,879 --> 00:12:54,279
specifically casting it onto an

440
00:12:54,480 --> 00:12:58,198
int of size of energy okay

441
00:12:58,399 --> 00:13:00,039
so now we're gonna say four size uh

442
00:13:00,240 --> 00:13:01,639
sorry i equals

443
00:13:01,839 --> 00:13:02,919
uh and in this case we're gonna start

444
00:13:03,120 --> 00:13:04,519
from the bottom of the image and work up

445
00:13:04,720 --> 00:13:07,559
so we're just gonna say size of energy

446
00:13:07,759 --> 00:13:09,559
along the first dimension minus one

447
00:13:09,759 --> 00:13:11,159
because we already have that bottom row

448
00:13:11,360 --> 00:13:14,438
created minus one all the way up to one

449
00:13:14,639 --> 00:13:18,120
and then we're gonna say for j equals

450
00:13:18,320 --> 00:13:21,639
um one two size of energy

451
00:13:21,839 --> 00:13:24,039
along the second dimension and we're

452
00:13:24,240 --> 00:13:25,639
ending it in there

453
00:13:25,839 --> 00:13:27,000
now we just have to fill in what we said

454
00:13:27,200 --> 00:13:28,919
before so again at every

455
00:13:29,120 --> 00:13:30,599
individual pixel we're looking left

456
00:13:30,799 --> 00:13:32,279
center and right so we have to find the

457
00:13:32,480 --> 00:13:33,878
left most element that we're looking at

458
00:13:34,078 --> 00:13:34,919
i'm going to say left is going to be

459
00:13:35,120 --> 00:13:37,959
equal to max of 1

460
00:13:38,159 --> 00:13:40,438
j minus 1. now the reason the max is in

461
00:13:40,639 --> 00:13:41,399
there is because

462
00:13:41,600 --> 00:13:43,159
we could be hitting the left edge and we

463
00:13:43,360 --> 00:13:44,039
just want to make sure we don't go

464
00:13:44,240 --> 00:13:45,159
beyond that left edge

465
00:13:45,360 --> 00:13:46,839
so similarly right is going to be equal

466
00:13:47,039 --> 00:13:49,799
to the minimum of j plus 1

467
00:13:50,000 --> 00:13:51,399
or the maximum that we could have which

468
00:13:51,600 --> 00:13:54,198
is going to be size of energy

469
00:13:54,399 --> 00:13:57,399
and then along the horizontal dimension

470
00:13:57,600 --> 00:13:59,159
okay so now we have the idea of left and

471
00:13:59,360 --> 00:14:00,758
right and now we just have to find

472
00:14:00,958 --> 00:14:03,159
kind of the local energy the rather the

473
00:14:03,360 --> 00:14:04,919
minimum local energy of the three pixels

474
00:14:05,120 --> 00:14:05,719
underneath us

475
00:14:05,919 --> 00:14:07,719
and the element of that minimum local

476
00:14:07,919 --> 00:14:09,399
energy so we're going to say local

477
00:14:09,600 --> 00:14:13,799
energy uh and then the next element

478
00:14:14,000 --> 00:14:16,919
is going to be equal to find min of

479
00:14:17,120 --> 00:14:19,240
energy map

480
00:14:19,440 --> 00:14:21,318
of and it should be yes i plus one

481
00:14:21,519 --> 00:14:22,679
because we're going one down and

482
00:14:22,879 --> 00:14:23,399
remember that

483
00:14:23,600 --> 00:14:25,159
y is kind of flipped in this way and

484
00:14:25,360 --> 00:14:26,438
then from left

485
00:14:26,639 --> 00:14:30,039
to right uh and i think i need an extra

486
00:14:30,240 --> 00:14:30,919
parenthesis in there

487
00:14:31,120 --> 00:14:34,359
perfect okay so what this will do is it

488
00:14:34,559 --> 00:14:36,438
will return not only the lowest possible

489
00:14:36,639 --> 00:14:38,279
value that could be from the lower path

490
00:14:38,480 --> 00:14:39,959
it will also return the element that

491
00:14:40,159 --> 00:14:41,559
it's supposed to be on but this element

492
00:14:41,759 --> 00:14:42,998
that it will return will either be one

493
00:14:43,198 --> 00:14:45,399
two or three it'll be one of those three

494
00:14:45,600 --> 00:14:46,679
so we're gonna have to modify that in

495
00:14:46,879 --> 00:14:47,559
just a second

496
00:14:47,759 --> 00:14:50,839
so i'm gonna say energy map of ij

497
00:14:51,039 --> 00:14:52,998
is gonna be equal to or sorry i do a

498
00:14:53,198 --> 00:14:54,998
plus equals although

499
00:14:55,198 --> 00:14:56,198
i don't have to because we initialize

500
00:14:56,399 --> 00:14:57,719
them all to 0 so i don't know why i'm

501
00:14:57,919 --> 00:14:59,479
doing that but i'm just doing it

502
00:14:59,679 --> 00:15:03,639
plus energy of i j

503
00:15:03,839 --> 00:15:05,078
and then down here i'm going to say next

504
00:15:05,278 --> 00:15:07,679
elements

505
00:15:08,159 --> 00:15:10,998
of i j is going to be equal to the next

506
00:15:11,198 --> 00:15:12,839
element

507
00:15:13,039 --> 00:15:14,519
uh minus two so again i just wanna be

508
00:15:14,720 --> 00:15:15,959
able to add the next element

509
00:15:16,159 --> 00:15:17,639
uh and it should be so like whatever

510
00:15:17,839 --> 00:15:18,919
element we're on i just wanna be able to

511
00:15:19,120 --> 00:15:20,438
say the next element in the seam

512
00:15:20,639 --> 00:15:22,039
will be whatever we were on plus the

513
00:15:22,240 --> 00:15:24,198
next element so if we do minus two here

514
00:15:24,399 --> 00:15:25,799
it shifts it so it's now going to be

515
00:15:26,000 --> 00:15:28,359
negative 1 0 1 instead of 1 2 3 so you

516
00:15:28,559 --> 00:15:29,878
can just add the next element

517
00:15:30,078 --> 00:15:32,679
directly to it now there's one catch i

518
00:15:32,879 --> 00:15:33,399
have to do here

519
00:15:33,600 --> 00:15:36,039
if we're on if the very left element is

520
00:15:36,240 --> 00:15:36,679
one oop

521
00:15:36,879 --> 00:15:38,758
sorry about the typo there if the very

522
00:15:38,958 --> 00:15:40,519
left element is one

523
00:15:40,720 --> 00:15:41,719
uh we're going to have to add one

524
00:15:41,919 --> 00:15:43,240
because there's only two elements in an

525
00:15:43,440 --> 00:15:44,758
array and it ends up working out

526
00:15:44,958 --> 00:15:47,078
that we have to catch that so we're

527
00:15:47,278 --> 00:15:49,639
gonna say next elements

528
00:15:49,839 --> 00:15:53,318
of i j is gonna be plus equals

529
00:15:53,519 --> 00:15:56,279
one okay so now if we return unless i

530
00:15:56,480 --> 00:15:58,279
failed miserably which i could have

531
00:15:58,480 --> 00:16:00,039
but if we return this it should work so

532
00:16:00,240 --> 00:16:01,558
we're going to return

533
00:16:01,759 --> 00:16:06,919
energy map and the next elements

534
00:16:07,120 --> 00:16:09,558
all right so let's hit it against the

535
00:16:09,759 --> 00:16:11,159
compiler and see what happens include

536
00:16:11,360 --> 00:16:12,599
seems to be fine so now we're going to

537
00:16:12,799 --> 00:16:14,279
say energy map

538
00:16:14,480 --> 00:16:16,758
and next elements it ran that's a good

539
00:16:16,958 --> 00:16:18,438
sign now let's i am show

540
00:16:18,639 --> 00:16:21,959
energy map and hopefully there we go

541
00:16:22,159 --> 00:16:23,558
perfect image exactly what i wanted to

542
00:16:23,759 --> 00:16:25,639
see uh so this is the same energy map

543
00:16:25,839 --> 00:16:27,159
you see over there

544
00:16:27,360 --> 00:16:28,359
and again we can show the next

545
00:16:28,559 --> 00:16:30,120
directions although there's a reason i

546
00:16:30,320 --> 00:16:31,558
left this image on the left hand corner

547
00:16:31,759 --> 00:16:32,679
because the next directions isn't

548
00:16:32,879 --> 00:16:34,679
particularly intuitive for me

549
00:16:34,879 --> 00:16:37,878
uh sorry next elements so james may i

550
00:16:38,078 --> 00:16:38,279
ask

551
00:16:38,480 --> 00:16:41,318
uh you just wrote a double for loop yes

552
00:16:41,519 --> 00:16:42,198
is that

553
00:16:42,399 --> 00:16:44,198
a style question is that the best way to

554
00:16:44,399 --> 00:16:45,799
do it probably not there's probably a

555
00:16:46,000 --> 00:16:47,318
way to broadcast it or something like

556
00:16:47,519 --> 00:16:47,719
that

557
00:16:47,919 --> 00:16:50,198
um or just can you nest can you just

558
00:16:50,399 --> 00:16:51,078
combine the two

559
00:16:51,278 --> 00:16:54,120
for loops uh so

560
00:16:54,320 --> 00:16:55,799
you probably could because uh the way

561
00:16:56,000 --> 00:16:57,479
julia works right is you can actually go

562
00:16:57,679 --> 00:16:57,959
through

563
00:16:58,159 --> 00:16:59,078
obviously i'm explaining this to the

564
00:16:59,278 --> 00:17:00,998
audience not not you but you could

565
00:17:01,198 --> 00:17:02,758
probably just have one big

566
00:17:02,958 --> 00:17:04,440
loop or that goes through all the

567
00:17:04,640 --> 00:17:06,039
elements immediately and then you could

568
00:17:06,240 --> 00:17:06,759
have like

569
00:17:06,959 --> 00:17:08,358
a new index for the inner dimension

570
00:17:08,558 --> 00:17:10,519
along j i just think intuitively it's a

571
00:17:10,720 --> 00:17:11,239
bit easier

572
00:17:11,439 --> 00:17:13,239
to have two separate sets of indices for

573
00:17:13,439 --> 00:17:14,919
one along the x dimension along the y

574
00:17:15,119 --> 00:17:15,559
dimension yeah

575
00:17:15,759 --> 00:17:16,598
i was just wondering if you could just

576
00:17:16,798 --> 00:17:18,200
delete the four put in a comma and

577
00:17:18,400 --> 00:17:19,399
delete one of the ends

578
00:17:19,599 --> 00:17:22,680
oh you want to do this oh wait uh so you

579
00:17:22,880 --> 00:17:25,280
want to do

580
00:17:25,599 --> 00:17:27,559
this so if you do that and then you do

581
00:17:27,759 --> 00:17:30,078
this

582
00:17:30,400 --> 00:17:31,559
is this what you're saying that's what

583
00:17:31,759 --> 00:17:33,879
i'm saying yep and then delete one of

584
00:17:34,079 --> 00:17:34,680
the ends

585
00:17:34,880 --> 00:17:37,079
and also let me i find that easy to read

586
00:17:37,279 --> 00:17:37,879
maybe you know

587
00:17:38,079 --> 00:17:40,279
oh yeah that's fine so let's write that

588
00:17:40,480 --> 00:17:41,639
include that

589
00:17:41,839 --> 00:17:43,319
and then if we run that it should still

590
00:17:43,519 --> 00:17:45,399
be fine so then we include

591
00:17:45,599 --> 00:17:47,799
i'm show energy map and we get exactly

592
00:17:48,000 --> 00:17:48,440
that

593
00:17:48,640 --> 00:17:50,440
except that it's easy to miss on that

594
00:17:50,640 --> 00:17:52,279
line that you have two different

595
00:17:52,480 --> 00:17:55,000
loops basically yeah there's the counter

596
00:17:55,200 --> 00:17:55,799
viewpoint

597
00:17:56,000 --> 00:17:57,559
okay regardless i think we should keep

598
00:17:57,759 --> 00:17:58,838
going we have just a little bit more to

599
00:17:59,038 --> 00:18:00,358
do and luckily the next bit is a lot

600
00:18:00,558 --> 00:18:01,879
easier than it seems

601
00:18:02,079 --> 00:18:03,240
but it seems there's not meant to be a

602
00:18:03,440 --> 00:18:05,159
pun there it's just seems whatever

603
00:18:05,359 --> 00:18:06,680
anyway let's keep going so the next

604
00:18:06,880 --> 00:18:08,039
thing we have to do is actually find the

605
00:18:08,240 --> 00:18:08,519
scene

606
00:18:08,720 --> 00:18:09,799
now i'm actually going to create another

607
00:18:10,000 --> 00:18:11,399
function here which is similar to the

608
00:18:11,599 --> 00:18:13,319
function we have in the notebook

609
00:18:13,519 --> 00:18:14,440
and this is going to be a function i'm

610
00:18:14,640 --> 00:18:18,640
going to call find seem at

611
00:18:21,279 --> 00:18:22,680
okay and the idea here is we're going to

612
00:18:22,880 --> 00:18:24,200
read in the set of next directions

613
00:18:24,400 --> 00:18:25,639
and we're just going to find the seam at

614
00:18:25,839 --> 00:18:27,240
some pixel in the top looking all the

615
00:18:27,440 --> 00:18:28,519
way down to the bottom

616
00:18:28,720 --> 00:18:30,279
so i'm going to say we have the next

617
00:18:30,480 --> 00:18:31,960
elements

618
00:18:32,160 --> 00:18:34,039
and then we also have whatever element

619
00:18:34,240 --> 00:18:35,000
we're going to start on

620
00:18:35,200 --> 00:18:36,200
i'm just calling it element it's

621
00:18:36,400 --> 00:18:37,399
probably a better name but i'm just

622
00:18:37,599 --> 00:18:38,519
going to call it element and

623
00:18:38,720 --> 00:18:41,240
end here okay this is actually

624
00:18:41,440 --> 00:18:42,838
surprisingly easy because again we

625
00:18:43,038 --> 00:18:44,119
already pre-generated

626
00:18:44,319 --> 00:18:45,879
the list of directions each scene will

627
00:18:46,079 --> 00:18:47,240
go at at every pixel

628
00:18:47,440 --> 00:18:48,838
so what we have to do here is simply say

629
00:18:49,038 --> 00:18:51,599
that the seam

630
00:18:51,759 --> 00:18:54,680
seam is going to be equal to zeros of

631
00:18:54,880 --> 00:18:55,399
integer

632
00:18:55,599 --> 00:18:56,598
and again the end's kind of important

633
00:18:56,798 --> 00:18:57,960
because we'll be using this for indices

634
00:18:58,160 --> 00:18:58,759
later

635
00:18:58,960 --> 00:19:03,159
of size of next elements

636
00:19:03,359 --> 00:19:05,000
um and then along the vertical direction

637
00:19:05,200 --> 00:19:06,440
here

638
00:19:06,640 --> 00:19:07,960
uh so the next thing we can say is that

639
00:19:08,160 --> 00:19:09,879
the seam of the first element

640
00:19:10,079 --> 00:19:12,279
of one is going to be equal to just

641
00:19:12,480 --> 00:19:13,159
whatever the element that you're

642
00:19:13,359 --> 00:19:13,719
starting on

643
00:19:13,919 --> 00:19:15,879
is and then here's where the next

644
00:19:16,079 --> 00:19:16,759
element's idea

645
00:19:16,960 --> 00:19:19,559
is is really important so we say 4 i

646
00:19:19,759 --> 00:19:20,119
equal to

647
00:19:20,319 --> 00:19:21,719
importantly 2 because we're skipping the

648
00:19:21,919 --> 00:19:23,559
first element here length

649
00:19:23,759 --> 00:19:25,799
of seam and we go in here and we end

650
00:19:26,000 --> 00:19:27,879
that we're now going to say

651
00:19:28,079 --> 00:19:30,919
seam of i is going to be equal to

652
00:19:31,119 --> 00:19:34,358
seam of i minus 1 plus

653
00:19:34,558 --> 00:19:37,479
the next element um

654
00:19:37,679 --> 00:19:40,598
of again whatever row we're on and then

655
00:19:40,798 --> 00:19:42,119
whatever element in the scene we were on

656
00:19:42,319 --> 00:19:43,479
before it's the seam

657
00:19:43,679 --> 00:19:46,358
of i minus one so this means that we

658
00:19:46,558 --> 00:19:47,639
should be able to just add all of the

659
00:19:47,839 --> 00:19:49,159
next elements together

660
00:19:49,359 --> 00:19:50,838
uh or rather add the next element to the

661
00:19:51,038 --> 00:19:52,200
scene we had before and this allows us

662
00:19:52,400 --> 00:19:53,879
to find the seam a bit easier

663
00:19:54,079 --> 00:19:55,319
and then at the end here we're going to

664
00:19:55,519 --> 00:19:57,479
return the scene

665
00:19:57,679 --> 00:19:59,799
okay so we should be able to run this

666
00:20:00,000 --> 00:20:00,519
right so

667
00:20:00,720 --> 00:20:02,838
i have a function so let's run seam is

668
00:20:03,038 --> 00:20:04,279
going to be equal to

669
00:20:04,480 --> 00:20:07,799
find seam at 100 oh actually

670
00:20:08,000 --> 00:20:09,079
uh i think that was a pre-generated

671
00:20:09,279 --> 00:20:10,200
function so now we're going to say find

672
00:20:10,400 --> 00:20:11,799
seam ah next element not defined that

673
00:20:12,000 --> 00:20:15,159
should be next to elements plural

674
00:20:15,359 --> 00:20:18,200
so now it should run good so what i did

675
00:20:18,400 --> 00:20:19,399
is i generated a seam

676
00:20:19,599 --> 00:20:21,159
starting at pixel 100 at the top and

677
00:20:21,359 --> 00:20:22,919
then working its way all the way down

678
00:20:23,119 --> 00:20:24,440
and so now we have the seam and now i'm

679
00:20:24,640 --> 00:20:25,719
going to use one of my pre-generated

680
00:20:25,919 --> 00:20:27,159
functions which is draw seam

681
00:20:27,359 --> 00:20:29,159
just to draw that seam onto an image and

682
00:20:29,359 --> 00:20:30,598
i'm going to call it image two

683
00:20:30,798 --> 00:20:31,879
it's going to be equal to draw seam

684
00:20:32,079 --> 00:20:34,119
image seam and then we're going to do i

685
00:20:34,319 --> 00:20:35,000
am show

686
00:20:35,200 --> 00:20:38,440
of image 2 and now we see that seam here

687
00:20:38,640 --> 00:20:40,039
and clearly trying to avoid all the

688
00:20:40,240 --> 00:20:42,039
important bits what's nice is looking at

689
00:20:42,240 --> 00:20:43,000
it in comparison here

690
00:20:43,200 --> 00:20:44,358
like i said before if we started this

691
00:20:44,558 --> 00:20:46,200
pixel in here it's going to want to take

692
00:20:46,400 --> 00:20:47,959
a hard right and then weave its way into

693
00:20:48,159 --> 00:20:49,399
this little black area in here

694
00:20:49,599 --> 00:20:50,838
and that's precisely what you see this

695
00:20:51,038 --> 00:20:52,440
seam doing in here so that i think it's

696
00:20:52,640 --> 00:20:53,719
kind of nice that it's doing what we

697
00:20:53,919 --> 00:20:55,159
expect

698
00:20:55,359 --> 00:20:57,159
okay so the last function we need to

699
00:20:57,359 --> 00:20:59,079
write is one that i

700
00:20:59,279 --> 00:21:01,000
naively just called find seam instead of

701
00:21:01,200 --> 00:21:02,680
find seam at it's probably not the best

702
00:21:02,880 --> 00:21:04,440
naming convention but this is just going

703
00:21:04,640 --> 00:21:05,639
to return

704
00:21:05,839 --> 00:21:08,680
the seam the seam of minimal energy

705
00:21:08,880 --> 00:21:10,279
now again because we can read this map

706
00:21:10,480 --> 00:21:14,039
over here as the minimal possible energy

707
00:21:14,240 --> 00:21:16,119
that we could be at at any point in time

708
00:21:16,319 --> 00:21:17,399
so like if we're at this pixel that's

709
00:21:17,599 --> 00:21:18,838
the minimum energy necessary

710
00:21:19,038 --> 00:21:20,680
to get to that point all we have to do

711
00:21:20,880 --> 00:21:21,879
is take that top line

712
00:21:22,079 --> 00:21:23,399
and find the minimum element in the top

713
00:21:23,599 --> 00:21:25,240
line and then we can just draw the seam

714
00:21:25,440 --> 00:21:26,680
corresponding to that

715
00:21:26,880 --> 00:21:28,440
so this should be relatively easy using

716
00:21:28,640 --> 00:21:29,879
the functions we had before we can just

717
00:21:30,079 --> 00:21:30,838
say energy

718
00:21:31,038 --> 00:21:33,479
map and then we can also say next

719
00:21:33,679 --> 00:21:36,000
elements

720
00:21:36,159 --> 00:21:38,039
is going to be equal to find energy at a

721
00:21:38,240 --> 00:21:40,039
find energy map

722
00:21:40,240 --> 00:21:42,598
of energy and then the last thing we

723
00:21:42,798 --> 00:21:43,959
need to do is just say

724
00:21:44,159 --> 00:21:45,639
we have some sort of minimum value which

725
00:21:45,839 --> 00:21:46,919
we don't care about so i'm going to call

726
00:21:47,119 --> 00:21:47,159
it

727
00:21:47,359 --> 00:21:49,319
underscore and then minimum element

728
00:21:49,519 --> 00:21:51,000
number

729
00:21:51,200 --> 00:21:52,358
and this is going to be equal to find

730
00:21:52,558 --> 00:21:54,358
min of

731
00:21:54,558 --> 00:21:57,719
energy map and it should be along the

732
00:21:57,919 --> 00:21:58,838
first

733
00:21:59,038 --> 00:22:00,838
row and then it should be just

734
00:22:01,038 --> 00:22:03,000
everything along the first row

735
00:22:03,200 --> 00:22:05,559
okay uh so now we should just be able to

736
00:22:05,759 --> 00:22:06,279
return

737
00:22:06,480 --> 00:22:09,559
uh find seam at and now we just have to

738
00:22:09,759 --> 00:22:12,680
find the seam at the next elements

739
00:22:12,880 --> 00:22:15,159
and then the minimum element something

740
00:22:15,359 --> 00:22:16,919
like that should work i think let's go

741
00:22:17,119 --> 00:22:18,200
ahead and include

742
00:22:18,400 --> 00:22:19,959
and let's just see what happens if we do

743
00:22:20,159 --> 00:22:21,639
find seam

744
00:22:21,839 --> 00:22:25,240
of energy hopefully it doesn't break

745
00:22:25,440 --> 00:22:26,838
uh doesn't seem to break seems to give

746
00:22:27,038 --> 00:22:28,838
an okay line so now let's just draw that

747
00:22:29,038 --> 00:22:30,039
onto our image again

748
00:22:30,240 --> 00:22:31,639
so image two is gonna be draw a seam

749
00:22:31,839 --> 00:22:33,879
onto the previous image and the seam

750
00:22:34,079 --> 00:22:36,358
and now if we plot that i am showed to

751
00:22:36,558 --> 00:22:37,319
oh

752
00:22:37,519 --> 00:22:39,959
hmm i think that's because i didn't name

753
00:22:40,159 --> 00:22:40,598
it something

754
00:22:40,798 --> 00:22:43,639
yes i need to call this theme and i need

755
00:22:43,839 --> 00:22:44,519
to put an equal sign

756
00:22:44,720 --> 00:22:47,159
one second there we go perfect so now if

757
00:22:47,359 --> 00:22:47,799
we do

758
00:22:48,000 --> 00:22:50,200
image two is equal to draw seam and we

759
00:22:50,400 --> 00:22:51,479
say i'm show image two

760
00:22:51,679 --> 00:22:52,919
you'll see that we have a seam that's

761
00:22:53,119 --> 00:22:54,680
over here on the right edge

762
00:22:54,880 --> 00:22:56,838
now if you remember from the notebook

763
00:22:57,038 --> 00:22:58,680
before this isn't precisely the same

764
00:22:58,880 --> 00:22:59,159
seam

765
00:22:59,359 --> 00:23:00,759
but it's relatively close to the one

766
00:23:00,960 --> 00:23:01,719
that we found in the notebook the

767
00:23:01,919 --> 00:23:03,159
difference might be that our energy

768
00:23:03,359 --> 00:23:04,440
function could be slightly different due

769
00:23:04,640 --> 00:23:05,639
to the fact that we're using a different

770
00:23:05,839 --> 00:23:06,759
convolved function

771
00:23:06,960 --> 00:23:09,240
or something like that so now what i'm

772
00:23:09,440 --> 00:23:10,519
going to do is i'm going to generate

773
00:23:10,720 --> 00:23:10,838
that

774
00:23:11,038 --> 00:23:13,559
entire video that we had before with our

775
00:23:13,759 --> 00:23:15,399
seam carving function again all the seam

776
00:23:15,599 --> 00:23:16,598
carving function is doing

777
00:23:16,798 --> 00:23:18,838
is one finding the energy two finding

778
00:23:19,038 --> 00:23:20,440
the seam and then three removing the

779
00:23:20,640 --> 00:23:22,358
seam from the image and then if we go in

780
00:23:22,558 --> 00:23:23,240
here we should just

781
00:23:23,440 --> 00:23:25,799
be able to run if i did this right seam

782
00:23:26,000 --> 00:23:26,919
carving

783
00:23:27,119 --> 00:23:29,879
of image and then some output resolution

784
00:23:30,079 --> 00:23:31,559
which we're just going to say is 600 or

785
00:23:31,759 --> 00:23:32,759
something for now

786
00:23:32,960 --> 00:23:35,319
um and what i've taken out here is the

787
00:23:35,519 --> 00:23:36,838
ability to write the image i just didn't

788
00:23:37,038 --> 00:23:37,879
want to write it to file because that

789
00:23:38,079 --> 00:23:38,919
takes a bit of time

790
00:23:39,119 --> 00:23:40,598
uh but this will return the last image

791
00:23:40,798 --> 00:23:42,440
so i'm just going to say image

792
00:23:42,640 --> 00:23:43,719
is going to be equal to this and we'll

793
00:23:43,919 --> 00:23:45,639
say image 3 or something and then we'll

794
00:23:45,839 --> 00:23:46,200
run that

795
00:23:46,400 --> 00:23:47,799
give it just a second to do its thing

796
00:23:48,000 --> 00:23:50,039
and then we should have an image that is

797
00:23:50,240 --> 00:23:51,399
smaller than the image that

798
00:23:51,599 --> 00:23:53,879
we had beforehand uh and this should

799
00:23:54,079 --> 00:23:55,000
give us maybe just

800
00:23:55,200 --> 00:23:57,879
one more minute for alan and and friends

801
00:23:58,079 --> 00:23:59,719
to talk about why steam carvings

802
00:23:59,919 --> 00:24:00,838
why we wanted to put it in the

803
00:24:01,038 --> 00:24:02,039
curriculum to begin with because there's

804
00:24:02,240 --> 00:24:04,519
a lot of really cool stuff um related to

805
00:24:04,720 --> 00:24:04,919
this

806
00:24:05,119 --> 00:24:06,759
um and different curricula and julia and

807
00:24:06,960 --> 00:24:08,119
all this kind of stuff so actually

808
00:24:08,319 --> 00:24:09,319
before that i just wanted to make a

809
00:24:09,519 --> 00:24:11,159
comment about julia style so you you

810
00:24:11,359 --> 00:24:11,719
could have

811
00:24:11,919 --> 00:24:14,200
uh called fine you could have used the

812
00:24:14,400 --> 00:24:14,759
same

813
00:24:14,960 --> 00:24:16,598
function name find seem for the two

814
00:24:16,798 --> 00:24:18,200
different versions of the function

815
00:24:18,400 --> 00:24:20,358
you're right theme and find team ad

816
00:24:20,558 --> 00:24:21,479
right you could have just called both of

817
00:24:21,679 --> 00:24:23,319
them fine team

818
00:24:23,519 --> 00:24:24,838
right and then that would have you know

819
00:24:25,038 --> 00:24:25,879
that actually probably would have been

820
00:24:26,079 --> 00:24:26,519
better

821
00:24:26,720 --> 00:24:28,039
um you would create two different

822
00:24:28,240 --> 00:24:30,119
methods right we could do that right now

823
00:24:30,319 --> 00:24:31,000
if we want

824
00:24:31,200 --> 00:24:34,200
yeah um so all we have to do is change

825
00:24:34,400 --> 00:24:35,159
the defined scene

826
00:24:35,359 --> 00:24:38,598
just enables you to think of fewer names

827
00:24:38,798 --> 00:24:41,399
finding names is always hard right yeah

828
00:24:41,599 --> 00:24:42,919
it's just below yeah so if i just change

829
00:24:43,119 --> 00:24:44,639
that to find seam it should work just

830
00:24:44,839 --> 00:24:47,839
fine

831
00:24:48,720 --> 00:24:51,159
uh wherever the two hardest problems in

832
00:24:51,359 --> 00:24:52,680
computer science right it's

833
00:24:52,880 --> 00:24:55,399
finding names of things cache errors and

834
00:24:55,599 --> 00:24:58,279
off by one errors

835
00:24:58,480 --> 00:25:00,358
is that two or three well that's off by

836
00:25:00,558 --> 00:25:01,959
one error that's the joke

837
00:25:02,159 --> 00:25:05,959
oh sorry so anyway here we see uh seam

838
00:25:06,159 --> 00:25:06,519
carving

839
00:25:06,720 --> 00:25:07,959
completely implemented and what is

840
00:25:08,159 --> 00:25:10,119
roughly 25 minutes um

841
00:25:10,319 --> 00:25:12,039
i'm really hoping that this was for me i

842
00:25:12,240 --> 00:25:13,479
find a lot of intuition seeing people

843
00:25:13,679 --> 00:25:15,240
just write things out in code

844
00:25:15,440 --> 00:25:16,440
and also you get to see a bunch of

845
00:25:16,640 --> 00:25:17,559
different coding styles so i hope that

846
00:25:17,759 --> 00:25:19,000
was interesting for you guys

847
00:25:19,200 --> 00:25:20,919
um so yeah alan do you want to talk

848
00:25:21,119 --> 00:25:23,240
about uh real fast and i have to switch

849
00:25:23,440 --> 00:25:24,039
to the uh

850
00:25:24,240 --> 00:25:26,358
to the local students but uh yeah why

851
00:25:26,558 --> 00:25:27,639
did we choose this first of all i just

852
00:25:27,839 --> 00:25:29,000
think this algorithm is cool and that's

853
00:25:29,200 --> 00:25:30,440
sort of like the

854
00:25:30,640 --> 00:25:31,639
that's sort of like the highest order

855
00:25:31,839 --> 00:25:32,919
bit i mean just like that you can do

856
00:25:33,119 --> 00:25:34,039
this so easily is

857
00:25:34,240 --> 00:25:36,358
really cool uh secondly the idea of

858
00:25:36,558 --> 00:25:37,959
illustrating dynamic programming

859
00:25:38,159 --> 00:25:40,119
at an early stage of a computer science

860
00:25:40,319 --> 00:25:41,159
type classes is

861
00:25:41,359 --> 00:25:42,838
is another good thing to do i mean you

862
00:25:43,038 --> 00:25:44,358
have all these paths and yet somehow if

863
00:25:44,558 --> 00:25:45,879
you work your way up by the

864
00:25:46,079 --> 00:25:47,639
magic of computer science you find the

865
00:25:47,839 --> 00:25:49,799
best one it's kind of a little miracle

866
00:25:50,000 --> 00:25:53,000
yup just like that and uh thirdly

867
00:25:53,200 --> 00:25:54,358
and you'll see this in the reminiscing

868
00:25:54,558 --> 00:25:55,719
video if you happen to watch it but i'll

869
00:25:55,919 --> 00:25:57,159
repeat it here in case you didn't see it

870
00:25:57,359 --> 00:25:59,639
which is that

871
00:25:59,839 --> 00:26:02,440
this was a example of something that was

872
00:26:02,640 --> 00:26:03,319
from

873
00:26:03,519 --> 00:26:06,358
uh there there there was a there was a

874
00:26:06,558 --> 00:26:07,399
meeting at mit

875
00:26:07,599 --> 00:26:09,000
figuring out which language to use this

876
00:26:09,200 --> 00:26:10,440
was five years ago julia wasn't ready

877
00:26:10,640 --> 00:26:11,240
yet but

878
00:26:11,440 --> 00:26:12,759
uh they asked about julia at the time

879
00:26:12,960 --> 00:26:14,358
and they said that python was way too

880
00:26:14,558 --> 00:26:16,200
slow for doing this kind of computation

881
00:26:16,400 --> 00:26:16,680
and they

882
00:26:16,880 --> 00:26:17,959
were wondering whether julia would be

883
00:26:18,159 --> 00:26:20,119
able to do it so easily and uh you know

884
00:26:20,319 --> 00:26:21,479
that that is one of the places where

885
00:26:21,679 --> 00:26:23,000
julia shines so he could just do this

886
00:26:23,200 --> 00:26:24,680
everything real fast

887
00:26:24,880 --> 00:26:28,039
you know that is one of the places

888
00:26:28,240 --> 00:26:30,880
there's some echo

889
00:26:32,240 --> 00:26:35,078
yeah okay so

890
00:26:35,278 --> 00:26:36,680
yeah so so that's coming from the other

891
00:26:36,880 --> 00:26:38,119
zoom meeting yeah so i'll just finish

892
00:26:38,319 --> 00:26:40,039
with that since i have to run off

893
00:26:40,240 --> 00:26:41,719
yeah okay so i think this is actually a

894
00:26:41,919 --> 00:26:43,240
good place to stop then uh we'll hop

895
00:26:43,440 --> 00:26:44,519
onto the other meeting with the mit

896
00:26:44,720 --> 00:26:45,319
students

897
00:26:45,519 --> 00:26:47,719
um i guess if there's any last comments

898
00:26:47,919 --> 00:26:48,680
go ahead and say them now

899
00:26:48,880 --> 00:26:51,959
otherwise we'll go

900
00:26:52,159 --> 00:26:54,119
all right great um so thank you guys so

901
00:26:54,319 --> 00:26:55,639
much for coming in have a wonderful day

902
00:26:55,839 --> 00:26:57,240
night afternoon morning evening whatever

903
00:26:57,440 --> 00:26:58,680
time it happens to be your time

904
00:26:58,880 --> 00:26:59,959
and hopefully we'll see you guys around

905
00:27:00,159 --> 00:27:01,639
for the next lecture uh should be next

906
00:27:01,839 --> 00:27:02,200
tuesday

907
00:27:02,400 --> 00:27:05,000
uh should be a lot of fun see you guys

908
00:27:05,200 --> 00:27:06,279
also don't have an end screen so you're

909
00:27:06,480 --> 00:27:11,480
gonna have to see this for two seconds

